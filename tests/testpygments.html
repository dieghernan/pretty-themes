
<!doctype html>
<html lang="en-US"><head>
   <meta charset="utf-8">
    <!-- Chulapa Jekyll Theme - v2.0.1.0001 -->
    <!--  MIT License-->
    <!-- Docs: https://dieghernan.github.io/chulapa -->
    <!-- Repo: https://github.com/dieghernan/chulapa -->
    <!-- Page build 2025-04-22 -->
     <!-- Jekyll Version 4.4.1 -->
    <!--Google Structured Data-->
    <script type="application/ld+json">
        {
      "@context": "https://schema.org",
	  "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://dieghernan.github.io/chulapa-jekyll-sample/highlighting"
      },
      "headline": "Syntax highlighting demo",
      "image": "https://github.com/octocat.png",
      "datePublished": "2025-04-22T06:54:54+00:00",
      "dateModified": "2025-04-22T06:54:54+00:00",
      "author": {
        "@type": "Person",
        "name": "Octocat"
        , "url": "https://github.com/github/"
        ,  "sameAs" : [
             "https://twitter.com/github"
            ,
             "https://github.com/facebook"
            ,
             "https://www.linkedin.com"
            ]
      },
       "publisher": {
        "@type": "Organization",
        "name": "Octocat",
        "url": "https://dieghernan.github.io/chulapa-jekyll-sample/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://github.com/octocat.png"
        }
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://dieghernan.github.io/chulapa-jekyll-sample/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Syntax highlighting demo"
      }]
    }
    </script>
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "name": "Syntax highlighting demo",
    "description": "Demo of the different pieces of code for testing syntax highlighting."
    }
}
</script><script type="application/ld+json">
{
  "@context" : "https://schema.org",
  "@type" : "Person",
  "image": "https://github.com/octocat.png",
  "homeLocation": {
    "@type": "Place",
    "name": "San Francisco, CA 94107, United States"
    },
  "description": "Publisher",
  "name" : "Octocat",
  "url" : "https://dieghernan.github.io/chulapa-jekyll-sample/"
  ,  "sameAs" : [
  "https://github.com/github/",
  "https://twitter.com/github",
  "https://github.com/facebook",
  "https://www.linkedin.com"
  ]
}
</script>
   <title>Syntax highlighting demo | Chulapa Jekyll Sample</title>
  <link rel="canonical" href="https://dieghernan.github.io/chulapa-jekyll-sample/highlighting">
    <!-- Atom feed -->
  <link href="https://dieghernan.github.io/chulapa-jekyll-sample/atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed Chulapa Jekyll Sample" >
    <!-- RSS 2.0 feed -->
  <link href="https://dieghernan.github.io/chulapa-jekyll-sample/rss.xml" type="application/rss+xml" rel="alternate" title="RSS 2.0 feed Chulapa Jekyll Sample" >
    <!-- Meta tags -->
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <meta name="author" content="Octocat" >
   <meta name="copyright" content="Octocat" >
   <meta name="description" content="Demo of the different pieces of code for testing syntax highlighting.">
   <meta name="thumbnail" content="https://github.com/octocat.png" >
   <meta name="robots" content="index, follow"><meta name="keywords" content="">
    <!-- OpenGraph -->
   <meta property="og:title" content="Syntax highlighting demo | Chulapa Jekyll Sample" >
   <meta property="og:site_name" content="Chulapa Jekyll Sample | A test" >
   <meta property="og:url" content="https://dieghernan.github.io/chulapa-jekyll-sample/highlighting" >
   <meta property="og:type" content="website" >
   <meta property="og:description" content="Demo of the different pieces of code for testing syntax highlighting." >
   <meta property="og:locale" content="en-US" >
   <meta property="og:image" content="https://github.com/octocat.png" >
    <!-- Twitter/X Cards -->
   <meta name="twitter:card" content="summary_large_image">
   <meta name="twitter:creator" content="@github" >
    <!-- start custom head snippets -->
<!-- this script is inserted before the css stylesheet -->
<!-- end custom head snippets -->
<!-- CSS -->
    <!-- Preconnect with Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fontawesome-->
    <!-- v6 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/dieghernan/chulapa@master/assets/js/chulapa_script.js" as="script" >
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/dieghernan/chulapa@master/assets/fonts/Chulapa/Chulapa-Bold_vmod.otf" as="font" type="font/otf" crossorigin>
    <!-- Theme css (Bootstrap included) -->
  <link rel="stylesheet" id="maincss" href="https://dieghernan.github.io/chulapa/assets/css/skins/media.css" >
    <!-- Highlighter -->
  <link id="csshigh" rel="stylesheet" href="./dev.css" >
    <!-- Custom css -->
  <link rel="stylesheet" href="https://dieghernan.github.io/chulapa-jekyll-sample/assets/css/custom.css" >
      <!-- start custom head snippets -->
<!-- insert favicons. use https://realfavicongenerator.net/ -->
<!-- end custom head snippets -->
</head>
<body class="d-flex flex-column h-entry" id="body">
	<a class="u-url d-none" href="https://dieghernan.github.io/chulapa-jekyll-sample/highlighting">Invisible link to canonical for Microformats</a>
	<nav class="navbar navbar-expand-md sticky-top navbar-chulapa" aria-label="primary-navigation">
	<div class="container-fluid mx-md-2">
			<a class="navbar-brand font-weight-bold" href="https://dieghernan.github.io/chulapa-jekyll-sample/">Home</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarToggler">
				<ul class="navbar-nav ml-auto"><li class="nav-item">
						<a class="nav-link " href="https://dieghernan.github.io/chulapa-jekyll-sample/blog/">Blog</a>
					</li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle  active font-weight-bold" href="#" id="Bootstrap-Demos" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Bootstrap Demos</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="Bootstrap-Demos"><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/bootstrap4">Bootstrap 4 Demo</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/bootstrap4_landing">Bootstrap 4 Demo Landing</a><a class="dropdown-item  active font-weight-bold" href="https://dieghernan.github.io/chulapa-jekyll-sample/highlighting">Highlighting<span class="sr-only">(current)</span></a></div>
					</li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle " href="#" id="Collections" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Collections</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="Collections"><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/allposts">All Posts</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/headers">Headers test</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/pets">Pets</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/recipes">Recipes</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/portfolio/foo-bar-website">Portfolio</a></div>
					</li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle " href="#" id="Extras" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Extras</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="Extras"><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/tags">Tags</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/categories">Categories</a><a class="dropdown-item " href="https://dieghernan.github.io/chulapa-jekyll-sample/archive">Archive</a></div>
					</li><li class="nav-item">
						<a class="nav-link " href="https://dieghernan.github.io/chulapa-jekyll-sample/sitemap/">Sitemap</a>
					</li><li class="nav-item">
						<a class="nav-link " href="https://dieghernan.github.io/chulapa-jekyll-sample/search">
							<span class="d-md-none p-0 pr-1">Search</span><i class="fa fa-search" aria-hidden="true"></i><span class="sr-only">Search</span>
						</a>
					</li></ul>
			</div></div>
</nav>	<header class="text-center header-chulapa"><div class="container-lg mt-2">
       <div class="row">
           <div class="col-lg-8 offset-lg-2">
           <h1 class="p-name">Syntax highlighting demo</h1>
           <hr class="mb-0">
			</div>
		</div>
	</div>
</header>
	<main class="container-lg pb-3 flex-fill">
		<div class="row pt-2">
			<aside class="col-lg-2 mt-lg-3 small"></aside>
			<article id="maincontent" class="col-lg-8 mt-3 e-content">
	<button class="btn btn-primary btn-sm rounded-right position-fixed chulapa-btn-sidebar bs-canvas-anim chulapa-btn-nofocus chulapa-fa-static" id='demo' onclick="openSideBar()" aria-label="Open Sidebar" aria-expanded="false" aria-controls="sideBar">
		<i class="fa-solid fa-plus"></i><span class="sr-only">Open Sidebar</span>
	</button>
	<div class="bs-canvas bs-canvas-anim bs-canvas-left position-fixed navbar-chulapa h-100" id='sideBar'>
		<p class="pt-2 pb-1 px-3">
			<button type="button" class="navbar-text close chulapa-btn-nofocus chulapa-fa-static" aria-label="Close" onclick="closeSideBar()">
				<i class="fa-solid fa-times"></i><span class="sr-only">Close Sidebar</span>
			</button>
		</p>
		<nav class="navbar-nav px-3 my-auto">		  <p class="mb-2" ><a class="nav-link font-weight-bold lead" href="#">Syntax highlighting demo</a></p>		
			<ul class="nav flex-column" id="sidetoc"><li class="nav-item nav d-block"><a href="#javascript" class="nav-link">Javascript</a></li><li class="nav-item nav d-block"><a href="#python" class="nav-link">Python</a></li><li class="nav-item nav d-block"><a href="#css" class="nav-link">CSS</a></li><li class="nav-item nav d-block"><a href="#php" class="nav-link">PHP</a></li><li class="nav-item nav d-block"><a href="#java" class="nav-link">Java</a></li><li class="nav-item nav d-block"><a href="#c" class="nav-link">C#</a></li><li class="nav-item nav d-block"><a href="#html" class="nav-link">HTML</a></li><li class="nav-item nav d-block"><a href="#r" class="nav-link">R</a></li><li class="nav-item nav d-block"><a href="#ruby" class="nav-link">Ruby</a></li><li class="nav-item nav d-block"><a href="#perl" class="nav-link">Perl</a></li><li class="nav-item nav d-block"><a href="#r-cran" class="nav-link">R (CRAN)</a></li></ul>
		</nav>   
	</div>
			<p>Demo of the different pieces of code for testing syntax highlighting.</p>
			<p>See a <code>standalone_piece_of_code</code></p>
<div>
 <h2 id="javascript">Javascript</h2>
 <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Cross-browser xml parsing</span>
<span class="kd">var</span> <span class="nx">parseXML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">;</span>
  <span class="k">if </span><span class="p">(</span> <span class="o">!</span><span class="nx">data</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">DOMParser</span> <span class="p">)</span> <span class="p">{</span> <span class="c1">// Standard</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DOMParser</span><span class="p">();</span>
      <span class="nx">xml</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">.</span><span class="nf">parseFromString</span><span class="p">(</span> <span class="nx">data</span> <span class="p">,</span> <span class="dl">"</span><span class="s2">text/xml</span><span class="dl">"</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// IE</span>
      <span class="nx">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActiveXObject</span><span class="p">(</span> <span class="dl">"</span><span class="s2">Microsoft.XMLDOM</span><span class="dl">"</span> <span class="p">);</span>
      <span class="nx">xml</span><span class="p">.</span><span class="k">async</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">xml</span><span class="p">.</span><span class="nf">loadXML</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">xml</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if </span><span class="p">(</span> <span class="o">!</span><span class="nx">xml</span> <span class="o">||</span> <span class="o">!</span><span class="nx">xml</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">||</span> <span class="nx">xml</span><span class="p">.</span><span class="nf">getElementsByTagName</span><span class="p">(</span> <span class="dl">"</span><span class="s2">parsererror</span><span class="dl">"</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span> <span class="dl">"</span><span class="s2">Invalid XML: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">xml</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Bind a function to a context, optionally partially applying any arguments.</span>
<span class="kd">var</span> <span class="nx">proxy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">;</span>

  <span class="k">if </span><span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">[</span> <span class="nx">context</span> <span class="p">];</span>
    <span class="nx">context</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
    <span class="nx">fn</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Quick check to determine if target is callable, in the spec</span>
  <span class="c1">// this throws a TypeError, but we will just return undefined.</span>
  <span class="k">if </span><span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nf">isFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Simulated bind</span>
  <span class="nx">args</span> <span class="o">=</span> <span class="nx">core_slice</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
  <span class="nx">proxy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nf">apply</span><span class="p">(</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span> <span class="nx">core_slice</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Set the guid of unique handler to the same of original handler, so it can be removed</span>
  <span class="nx">proxy</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">proxy</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sound</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">Sound</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">something</span><span class="p">;</span> <span class="p">}</span>
<span class="nx">Sound</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">Sound</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="nx">myfunc</span>
<span class="kd">var</span> <span class="nx">parser</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">parser</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://example.com:3000/pathname/?search=test#hash</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">parser</span><span class="p">.</span><span class="nx">hostname</span><span class="p">;</span> <span class="c1">// =&gt; "example.com"</span>


</code></pre></div></div>
 <h2 id="python">Python</h2>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">#!/usr/bin/python
# -*- coding: utf-8 -*-
</span>
<span class="kn">import</span> <span class="n">re</span>
<span class="kn">import</span> <span class="n">sublime</span>
<span class="kn">import</span> <span class="n">sublime_plugin</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>


<span class="k">class</span> <span class="nc">SublimeTasksBase</span><span class="p">(</span><span class="n">sublime_plugin</span><span class="p">.</span><span class="n">TextCommand</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">edit</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">settings</span><span class="p">().</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">open_tasks_bullet</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">done_tasks_bullet</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">settings</span><span class="p">().</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">done_tasks_bullet</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">date_format</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">settings</span><span class="p">().</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">date_format</span><span class="sh">'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">settings</span><span class="p">().</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">done_tag</span><span class="sh">'</span><span class="p">):</span>
            <span class="n">self</span><span class="p">.</span><span class="n">done_tag</span> <span class="o">=</span> <span class="sh">"</span><span class="s">@done</span><span class="sh">"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">done_tag</span> <span class="o">=</span> <span class="sh">""</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">runCommand</span><span class="p">(</span><span class="n">edit</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NewCommand</span><span class="p">(</span><span class="n">SublimeTasksBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">runCommand</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">edit</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">region</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">line</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
            <span class="n">line_contents</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">).</span><span class="nf">rstrip</span><span class="p">()</span>
            <span class="n">has_bullet</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sh">'</span><span class="s">^(\s*)[</span><span class="sh">'</span> <span class="o">+</span> <span class="n">re</span><span class="p">.</span><span class="nf">escape</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span><span class="p">)</span> <span class="o">+</span> <span class="n">re</span><span class="p">.</span><span class="nf">escape</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">done_tasks_bullet</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="s">]</span><span class="sh">'</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
            <span class="n">current_scope</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">scope_name</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="n">b</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">has_bullet</span><span class="p">:</span>
                <span class="n">grps</span> <span class="o">=</span> <span class="n">has_bullet</span><span class="p">.</span><span class="nf">groups</span><span class="p">()</span>
                <span class="n">line_contents</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">grps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span>
                <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">line_contents</span><span class="p">)</span>
            <span class="k">elif</span> <span class="sh">'</span><span class="s">header</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">current_scope</span><span class="p">:</span>
                <span class="n">header</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sh">'</span><span class="s">^(\s*)\S+</span><span class="sh">'</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
                    <span class="n">grps</span> <span class="o">=</span> <span class="n">header</span><span class="p">.</span><span class="nf">groups</span><span class="p">()</span>
                    <span class="n">line_contents</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">grps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line_contents</span> <span class="o">=</span>  <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span>
                <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">line_contents</span><span class="p">)</span>
                <span class="n">end</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="n">b</span>
                <span class="n">pt</span> <span class="o">=</span> <span class="n">sublime</span><span class="p">.</span><span class="nc">Region</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
                <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">().</span><span class="nf">clear</span><span class="p">()</span>
                <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">().</span><span class="nf">add</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">has_space</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sh">'</span><span class="s">^(\s+)(.*)</span><span class="sh">'</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">has_space</span><span class="p">:</span>
                    <span class="n">grps</span> <span class="o">=</span> <span class="n">has_space</span><span class="p">.</span><span class="nf">groups</span><span class="p">()</span>
                    <span class="n">spaces</span> <span class="o">=</span> <span class="n">grps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">line_contents</span> <span class="o">=</span> <span class="n">spaces</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> <span class="n">grps</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">line_contents</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line_contents</span> <span class="o">=</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">open_tasks_bullet</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">substr</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">line_contents</span><span class="p">)</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="n">b</span>
                    <span class="n">pt</span> <span class="o">=</span> <span class="n">sublime</span><span class="p">.</span><span class="nc">Region</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">().</span><span class="nf">clear</span><span class="p">()</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="nf">sel</span><span class="p">().</span><span class="nf">add</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>



</code></pre></div></div>
 <h2 id="css">CSS</h2>
 <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">body</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">arial</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">p</span><span class="o">,</span> <span class="nt">table</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span><span class="m">#CCC</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span><span class="m">#39F</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.addon-store</span> <span class="nc">.pagehead</span> <span class="nt">h1</span> <span class="p">{</span> <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span> <span class="p">}</span>
<span class="nc">.addon-store</span> <span class="nc">.addon-summary</span><span class="nd">:after</span> <span class="p">{</span> <span class="nl">clear</span><span class="p">:</span> <span class="nb">both</span> <span class="p">}</span>

<span class="nf">#addon-store</span> <span class="nc">.pagehead</span> <span class="nc">.electrocat-small</span> <span class="p">{</span>
    <span class="nl">bottom</span><span class="p">:</span> <span class="m">-7px</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.addon-store</span> <span class="nc">.addons-nav</span> <span class="nt">a</span><span class="nc">.selected</span> <span class="p">{</span>
    <span class="nl">border-bottom-color</span><span class="p">:</span> <span class="m">#d26911</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#333</span><span class="p">;</span>
    <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">14px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.addon-store</span> <span class="nc">.addon-icon</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ddd</span><span class="p">;</span>
    <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">2px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">0.15</span><span class="p">);</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">80px</span><span class="p">;</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">14px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">80px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.addon-store</span> <span class="nc">.developer-callout</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#f1f1f1</span><span class="p">;</span>
    <span class="nl">background-image</span><span class="p">:</span> <span class="n">-moz-linear-gradient</span><span class="p">(</span><span class="m">#fafafa</span><span class="p">,</span> <span class="m">#f1f1f1</span><span class="p">);</span>
    <span class="nl">background-image</span><span class="p">:</span> <span class="n">-webkit-linear-gradient</span><span class="p">(</span><span class="m">#fafafa</span><span class="p">,</span> <span class="m">#f1f1f1</span><span class="p">);</span>
    <span class="nl">background-image</span><span class="p">:</span> <span class="n">linear-gradient</span><span class="p">(</span><span class="m">#fafafa</span><span class="p">,</span> <span class="m">#f1f1f1</span><span class="p">);</span>
    <span class="nl">background-repeat</span><span class="p">:</span> <span class="nb">repeat-x</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ddd</span><span class="p">;</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ccc</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
    <span class="nl">box-shadow</span><span class="p">:</span> <span class="nb">inset</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">0</span> <span class="m">#fff</span><span class="p">,</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">5px</span> <span class="m">#f1f1f1</span><span class="p">;</span>
    <span class="nl">margin-top</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span>
    <span class="nl">text-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">0</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.addon-field-editor</span> <span class="nc">.addon-field-list</span><span class="o">,</span> <span class="nc">.addon-field-editor</span> <span class="nc">.addon-new-field</span> <span class="p">{</span>
    <span class="nl">-moz-box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
    <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">595px</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
 <h2 id="php">PHP</h2>
 <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;?php</span>

<span class="c1">// base class with member properties and methods</span>
<span class="kd">class</span> <span class="nc">Vegetable</span> <span class="p">{</span>

   <span class="k">var</span> <span class="nv">$edible</span><span class="p">;</span>
   <span class="k">var</span> <span class="nv">$color</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">Vegetable</span><span class="p">(</span><span class="nv">$edible</span><span class="p">,</span> <span class="nv">$color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">edible</span> <span class="o">=</span> <span class="nv">$edible</span><span class="p">;</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">color</span> <span class="o">=</span> <span class="nv">$color</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">function</span> <span class="n">is_edible</span><span class="p">()</span>
   <span class="p">{</span>
       <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">edible</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">function</span> <span class="n">what_color</span><span class="p">()</span>
   <span class="p">{</span>
       <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">color</span><span class="p">;</span>
   <span class="p">}</span>

<span class="p">}</span> <span class="c1">// end of class Vegetable</span>

<span class="c1">// extends the base class</span>
<span class="kd">class</span> <span class="nc">Spinach</span> <span class="kd">extends</span> <span class="nc">Vegetable</span> <span class="p">{</span>

   <span class="k">var</span> <span class="nv">$cooked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">Spinach</span><span class="p">()</span>
   <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">Vegetable</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="s2">"green"</span><span class="p">);</span>
   <span class="p">}</span>

   <span class="k">function</span> <span class="n">cook_it</span><span class="p">()</span>
   <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">cooked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">function</span> <span class="n">is_cooked</span><span class="p">()</span>
   <span class="p">{</span>
       <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">cooked</span><span class="p">;</span>
   <span class="p">}</span>

<span class="p">}</span> <span class="c1">// end of class Spinach</span>

<span class="cp">?&gt;</span>

</code></pre></div></div>
 <h2 id="java">Java</h2>
 <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Life</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">(</span><span class="kt">boolean</span><span class="o">[][]</span> <span class="n">grid</span><span class="o">){</span>
        <span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">boolean</span><span class="o">[]</span> <span class="n">row</span> <span class="o">:</span> <span class="n">grid</span><span class="o">){</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">val</span> <span class="o">:</span> <span class="n">row</span><span class="o">)</span>
                <span class="k">if</span><span class="o">(</span><span class="n">val</span><span class="o">)</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s">"*"</span><span class="o">;</span>
                <span class="k">else</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s">"."</span><span class="o">;</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">"\n"</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span><span class="o">[][]</span> <span class="nf">gen</span><span class="o">(){</span>
        <span class="kt">boolean</span><span class="o">[][]</span> <span class="n">grid</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="mi">10</span><span class="o">][</span><span class="mi">10</span><span class="o">];</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">r</span><span class="o">++)</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">c</span><span class="o">++)</span>
                <span class="k">if</span><span class="o">(</span> <span class="nc">Math</span><span class="o">.</span><span class="na">random</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mf">0.7</span> <span class="o">)</span>
                    <span class="n">grid</span><span class="o">[</span><span class="n">r</span><span class="o">][</span><span class="n">c</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">grid</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="kt">boolean</span><span class="o">[][]</span> <span class="n">world</span> <span class="o">=</span> <span class="n">gen</span><span class="o">();</span>
        <span class="n">show</span><span class="o">(</span><span class="n">world</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="n">world</span> <span class="o">=</span> <span class="n">nextGen</span><span class="o">(</span><span class="n">world</span><span class="o">);</span>
        <span class="n">show</span><span class="o">(</span><span class="n">world</span><span class="o">);</span>
        <span class="nc">Scanner</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
        <span class="k">while</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">nextLine</span><span class="o">().</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
            <span class="n">world</span> <span class="o">=</span> <span class="n">nextGen</span><span class="o">(</span><span class="n">world</span><span class="o">);</span>
            <span class="n">show</span><span class="o">(</span><span class="n">world</span><span class="o">);</span>

        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span><span class="o">[][]</span> <span class="nf">nextGen</span><span class="o">(</span><span class="kt">boolean</span><span class="o">[][]</span> <span class="n">world</span><span class="o">){</span>
        <span class="kt">boolean</span><span class="o">[][]</span> <span class="n">newWorld</span>
            <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="n">world</span><span class="o">.</span><span class="na">length</span><span class="o">][</span><span class="n">world</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">num</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">world</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">r</span><span class="o">++){</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">world</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span> <span class="n">c</span><span class="o">++){</span>
                <span class="n">num</span> <span class="o">=</span> <span class="n">numNeighbors</span><span class="o">(</span><span class="n">world</span><span class="o">,</span> <span class="n">r</span><span class="o">,</span> <span class="n">c</span><span class="o">);</span>
                <span class="k">if</span><span class="o">(</span> <span class="n">occupiedNext</span><span class="o">(</span><span class="n">num</span><span class="o">,</span> <span class="n">world</span><span class="o">[</span><span class="n">r</span><span class="o">][</span><span class="n">c</span><span class="o">])</span> <span class="o">)</span>
                    <span class="n">newWorld</span><span class="o">[</span><span class="n">r</span><span class="o">][</span><span class="n">c</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">newWorld</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">occupiedNext</span><span class="o">(</span><span class="kt">int</span> <span class="n">numNeighbors</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">occupied</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span> <span class="n">occupied</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">numNeighbors</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="n">numNeighbors</span> <span class="o">==</span> <span class="mi">3</span><span class="o">))</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(!</span><span class="n">occupied</span> <span class="o">&amp;&amp;</span> <span class="n">numNeighbors</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">numNeighbors</span><span class="o">(</span><span class="kt">boolean</span><span class="o">[][]</span> <span class="n">world</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row</span><span class="o">,</span> <span class="kt">int</span> <span class="n">col</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">world</span><span class="o">[</span><span class="n">row</span><span class="o">][</span><span class="n">col</span><span class="o">]</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">r</span><span class="o">++)</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">col</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">c</span><span class="o">++)</span>
                <span class="k">if</span><span class="o">(</span> <span class="n">inbounds</span><span class="o">(</span><span class="n">world</span><span class="o">,</span> <span class="n">r</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">world</span><span class="o">[</span><span class="n">r</span><span class="o">][</span><span class="n">c</span><span class="o">]</span> <span class="o">)</span>
                    <span class="n">num</span><span class="o">++;</span>

        <span class="k">return</span> <span class="n">num</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">inbounds</span><span class="o">(</span><span class="kt">boolean</span><span class="o">[][]</span> <span class="n">world</span><span class="o">,</span> <span class="kt">int</span> <span class="n">r</span><span class="o">,</span> <span class="kt">int</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">world</span><span class="o">.</span><span class="na">length</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
        <span class="n">c</span> <span class="o">&lt;</span> <span class="n">world</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">length</span><span class="o">;</span>
    <span class="o">}</span>



<span class="o">}</span>


</code></pre></div></div>
 <h2 id="c">C#</h2>
 <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Abp.Domain.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Abp.Domain.Repositories</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Abp.MemoryDb.Repositories</span>
<span class="p">{</span>
    <span class="c1">//TODO: Implement thread-safety..?</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MemoryRepository</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="n">TPrimaryKey</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">AbpRepositoryBase</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">,</span> <span class="n">TPrimaryKey</span><span class="p">&gt;</span>
        <span class="k">where</span> <span class="n">TEntity</span> <span class="p">:</span> <span class="k">class</span><span class="err">,</span> <span class="nc">IEntity</span><span class="p">&lt;</span><span class="n">TPrimaryKey</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IMemoryDatabaseProvider</span> <span class="n">_databaseProvider</span><span class="p">;</span>
        <span class="k">protected</span> <span class="n">MemoryDatabase</span> <span class="n">Database</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_databaseProvider</span><span class="p">.</span><span class="n">Database</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span>

        <span class="k">protected</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span> <span class="n">Table</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Database</span><span class="p">.</span><span class="n">Set</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;();</span> <span class="p">}</span> <span class="p">}</span>

        <span class="k">private</span> <span class="k">readonly</span> <span class="n">MemoryPrimaryKeyGenerator</span><span class="p">&lt;</span><span class="n">TPrimaryKey</span><span class="p">&gt;</span> <span class="n">_primaryKeyGenerator</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">MemoryRepository</span><span class="p">(</span><span class="n">IMemoryDatabaseProvider</span> <span class="n">databaseProvider</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_databaseProvider</span> <span class="p">=</span> <span class="n">databaseProvider</span><span class="p">;</span>
            <span class="n">_primaryKeyGenerator</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MemoryPrimaryKeyGenerator</span><span class="p">&lt;</span><span class="n">TPrimaryKey</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="n">IQueryable</span><span class="p">&lt;</span><span class="n">TEntity</span><span class="p">&gt;</span> <span class="nf">GetAll</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">.</span><span class="nf">AsQueryable</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="n">TEntity</span> <span class="nf">Insert</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="nf">IsTransient</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="n">entity</span><span class="p">.</span><span class="n">Id</span> <span class="p">=</span> <span class="n">_primaryKeyGenerator</span><span class="p">.</span><span class="nf">GetNext</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="n">Table</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">entity</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="n">TEntity</span> <span class="nf">Update</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">index</span> <span class="p">=</span> <span class="n">Table</span><span class="p">.</span><span class="nf">FindIndex</span><span class="p">(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="n">EqualityComparer</span><span class="p">&lt;</span><span class="n">TPrimaryKey</span><span class="p">&gt;.</span><span class="n">Default</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">entity</span><span class="p">.</span><span class="n">Id</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Table</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="p">=</span> <span class="n">entity</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">entity</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">TEntity</span> <span class="n">entity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nf">Delete</span><span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">TPrimaryKey</span> <span class="n">id</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">index</span> <span class="p">=</span> <span class="n">Table</span><span class="p">.</span><span class="nf">FindIndex</span><span class="p">(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="n">EqualityComparer</span><span class="p">&lt;</span><span class="n">TPrimaryKey</span><span class="p">&gt;.</span><span class="n">Default</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">id</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Table</span><span class="p">.</span><span class="nf">RemoveAt</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
 <h2 id="html">HTML</h2>
 <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="c">&lt;!-- Meta, title, CSS, favicons, etc. --&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"author"</span> <span class="na">content=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Bootstrap<span class="nt">&lt;/title&gt;</span>

    <span class="c">&lt;!-- Bootstrap core CSS --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"./dist/css/bootstrap.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- Documentation extras --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"./assets/css/docs.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"./assets/css/pygments-manni.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"shortcut icon"</span> <span class="na">href=</span><span class="s">"./assets/ico/favicon.png"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"bs-docs-home"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- Docs master nav --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar navbar-inverse navbar-fixed-top bs-docs-nav"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"./"</span> <span class="na">class=</span><span class="s">"navbar-brand"</span><span class="nt">&gt;</span>Bootstrap 3 RC1<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"navbar-toggle"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">data-toggle=</span><span class="s">"collapse"</span> <span class="na">data-target=</span><span class="s">".bs-navbar-collapse"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"icon-bar"</span><span class="nt">&gt;&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"icon-bar"</span><span class="nt">&gt;&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"icon-bar"</span><span class="nt">&gt;&lt;/span&gt;</span>
      <span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"nav-collapse collapse bs-navbar-collapse"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav navbar-nav"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"./getting-started"</span><span class="nt">&gt;</span>Getting started<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"./css"</span><span class="nt">&gt;</span>CSS<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"./components"</span><span class="nt">&gt;</span>Components<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"./javascript"</span><span class="nt">&gt;</span>JavaScript<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"./customize"</span><span class="nt">&gt;</span>Customize<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="c">&lt;!-- Page content of course! --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bs-masthead"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>Bootstrap 3<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"lead"</span><span class="nt">&gt;</span>Sleek, intuitive, and powerful mobile-first front-end framework for faster and easier web development.<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://getbootstrap.com/bs-v3.0.0-rc1-dist.zip"</span> <span class="na">class=</span><span class="s">"btn btn-bs btn-large"</span> <span class="na">onclick=</span><span class="s">"_gaq.push(['_trackEvent', 'Jumbotron actions', 'Download', 'Download 3.0.0 RC1']);"</span><span class="nt">&gt;</span>Download Bootstrap<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./assets/js/jquery.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./dist/js/bootstrap.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./assets/js/holder.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./assets/js/application.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div></div>
 <h2 id="r">R</h2>
 <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">geom_dotplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bindot"</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w">
</span><span class="n">na.rm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">binwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">binaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"x"</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="o">=</span><span class="s2">"dotdensity"</span><span class="p">,</span><span class="w"> </span><span class="n">binpositions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bygroup"</span><span class="p">,</span><span class="w"> </span><span class="n">stackdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"up"</span><span class="p">,</span><span class="w">
</span><span class="n">stackratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">dotsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">stackgroups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">GeomDotplot</span><span class="o">$</span><span class="n">new</span><span class="p">(</span><span class="n">mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapping</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stat</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">position</span><span class="p">,</span><span class="w">
  </span><span class="n">na.rm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">na.rm</span><span class="p">,</span><span class="w"> </span><span class="n">binwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binwidth</span><span class="p">,</span><span class="w"> </span><span class="n">binaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binaxis</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">binpositions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binpositions</span><span class="p">,</span><span class="w">
  </span><span class="n">stackdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stackdir</span><span class="p">,</span><span class="w"> </span><span class="n">stackratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stackratio</span><span class="p">,</span><span class="w"> </span><span class="n">dotsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dotsize</span><span class="p">,</span><span class="w"> </span><span class="n">stackgroups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stackgroups</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">GeomDotplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">proto</span><span class="p">(</span><span class="n">Geom</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">objname</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"dotplot"</span><span class="w">

  </span><span class="n">new</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">){</span><span class="w">
    </span><span class="c1"># This code is adapted from Layer$new. It's needed to pull out the stat_params</span><span class="w">
    </span><span class="c1"># and geom_params, then manually add binaxis to both sets of params. Otherwise</span><span class="w">
    </span><span class="c1"># Layer$new will give binaxis only to the geom.</span><span class="w">

    </span><span class="n">stat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Stat</span><span class="o">$</span><span class="n">find</span><span class="p">(</span><span class="n">stat</span><span class="p">)</span><span class="w">
    </span><span class="n">match.params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">possible</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">"..."</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">possible</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">params</span><span class="w">
      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">params</span><span class="p">[</span><span class="n">match</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">possible</span><span class="p">),</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">params</span><span class="p">),</span><span class="w"> </span><span class="n">nomatch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">)]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">

    </span><span class="n">params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">...</span><span class="p">)</span><span class="w">
    </span><span class="c1"># American names must be changed here so that they'll go to geom_params;</span><span class="w">
    </span><span class="c1"># otherwise they'll end up in stat_params</span><span class="w">
    </span><span class="n">params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rename_aes</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="w">

    </span><span class="n">geom_params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">match.params</span><span class="p">(</span><span class="n">.</span><span class="o">$</span><span class="n">parameters</span><span class="p">(),</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w">
    </span><span class="n">stat_params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">match.params</span><span class="p">(</span><span class="n">stat</span><span class="o">$</span><span class="n">parameters</span><span class="p">(),</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w">
    </span><span class="n">stat_params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stat_params</span><span class="p">[</span><span class="n">setdiff</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">stat_params</span><span class="p">),</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">geom_params</span><span class="p">))]</span><span class="w">
    </span><span class="c1"># Add back binaxis</span><span class="w">
    </span><span class="n">stat_params</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">stat_params</span><span class="p">,</span><span class="w"> </span><span class="n">binaxis</span><span class="o">=</span><span class="n">params</span><span class="o">$</span><span class="n">binaxis</span><span class="p">)</span><span class="w">

    </span><span class="c1"># If identical(position, "stack") or position is position_stack() (the test</span><span class="w">
    </span><span class="c1">#  is kind of complex), tell them to use stackgroups=TRUE instead. Need to</span><span class="w">
    </span><span class="c1">#  use identical() instead of ==, because == will fail if object is</span><span class="w">
    </span><span class="c1">#  position_stack() or position_dodge()</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nf">is.null</span><span class="p">(</span><span class="n">position</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">identical</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="s2">"stack"</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">is.proto</span><span class="p">(</span><span class="n">position</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">position</span><span class="o">$</span><span class="n">objname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"stack"</span><span class="p">)))</span><span class="w">
      </span><span class="n">message</span><span class="p">(</span><span class="s2">"position=\"stack\" doesn't work properly with geom_dotplot. Use stackgroups=TRUE instead."</span><span class="p">)</span><span class="w">

    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">stackgroups</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">params</span><span class="o">$</span><span class="n">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"dotdensity"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">params</span><span class="o">$</span><span class="n">binpositions</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"bygroup"</span><span class="p">)</span><span class="w">
      </span><span class="n">message</span><span class="p">(</span><span class="s1">'geom_dotplot called with stackgroups=TRUE and method="dotdensity". You probably want to set binpositions="all"'</span><span class="p">)</span><span class="w">

    </span><span class="n">do.call</span><span class="p">(</span><span class="s2">"layer"</span><span class="p">,</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapping</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stat</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">position</span><span class="p">,</span><span class="w">
                          </span><span class="n">geom_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">geom_params</span><span class="p">,</span><span class="w"> </span><span class="n">stat_params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stat_params</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">))</span><span class="w">
  </span><span class="p">}</span><span class="w">


  </span><span class="n">reparameterise</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">df</span><span class="o">$</span><span class="n">width</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">width</span><span class="w"> </span><span class="o">%||%</span><span class="w">
      </span><span class="n">params</span><span class="o">$</span><span class="n">width</span><span class="w"> </span><span class="o">%||%</span><span class="w"> </span><span class="p">(</span><span class="n">resolution</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">0.9</span><span class="p">)</span><span class="w">

    </span><span class="c1"># Set up the stacking function and range</span><span class="w">
    </span><span class="k">if</span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">stackdir</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">params</span><span class="o">$</span><span class="n">stackdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"up"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">stackdots</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">.5</span><span class="w">
      </span><span class="n">stackaxismin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span><span class="w">
      </span><span class="n">stackaxismax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">stackdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"down"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">stackdots</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">.5</span><span class="w">
      </span><span class="n">stackaxismin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">-1</span><span class="w">
      </span><span class="n">stackaxismax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">stackdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"center"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">stackdots</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="w">
      </span><span class="n">stackaxismin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">-.5</span><span class="w">
      </span><span class="n">stackaxismax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">.5</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">stackdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"centerwhole"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">stackdots</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">floor</span><span class="p">(</span><span class="nf">max</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
      </span><span class="n">stackaxismin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">-.5</span><span class="w">
      </span><span class="n">stackaxismax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">.5</span><span class="w">
    </span><span class="p">}</span><span class="w">


    </span><span class="c1"># Fill the bins: at a given x (or y), if count=3, make 3 entries at that x</span><span class="w">
    </span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="p">[</span><span class="nf">rep</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="n">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">),</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">count</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">

    </span><span class="c1"># Next part will set the position of each dot within each stack</span><span class="w">
    </span><span class="c1"># If stackgroups=TRUE, split only on x (or y) and panel; if not stacking, also split by group</span><span class="w">
    </span><span class="n">plyvars</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">params</span><span class="o">$</span><span class="n">binaxis</span><span class="w"> </span><span class="o">%||%</span><span class="w"> </span><span class="s2">"x"</span><span class="w">
    </span><span class="n">plyvars</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">plyvars</span><span class="p">,</span><span class="w"> </span><span class="s2">"PANEL"</span><span class="p">)</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">stackgroups</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">params</span><span class="o">$</span><span class="n">stackgroups</span><span class="p">)</span><span class="w">
      </span><span class="n">plyvars</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">plyvars</span><span class="p">,</span><span class="w"> </span><span class="s2">"group"</span><span class="p">)</span><span class="w">

    </span><span class="c1"># Within each x, or x+group, set countidx=1,2,3, and set stackpos according to stack function</span><span class="w">
    </span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ddply</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">plyvars</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">xx</span><span class="o">$</span><span class="n">countidx</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">nrow</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span><span class="w">
            </span><span class="n">xx</span><span class="o">$</span><span class="n">stackpos</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stackdots</span><span class="p">(</span><span class="n">xx</span><span class="o">$</span><span class="n">countidx</span><span class="p">)</span><span class="w">
            </span><span class="n">xx</span><span class="w">
          </span><span class="p">})</span><span class="w">


    </span><span class="c1"># Set the bounding boxes for the dots</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">binaxis</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">params</span><span class="o">$</span><span class="n">binaxis</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"x"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="c1"># ymin, ymax, xmin, and xmax define the bounding rectangle for each stack</span><span class="w">
      </span><span class="c1"># Can't do bounding box per dot, because y position isn't real.</span><span class="w">
      </span><span class="c1"># After position code is rewritten, each dot should have its own bounding box.</span><span class="w">
      </span><span class="n">df</span><span class="o">$</span><span class="n">xmin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">binwidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="w">
      </span><span class="n">df</span><span class="o">$</span><span class="n">xmax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">binwidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="w">
      </span><span class="n">df</span><span class="o">$</span><span class="n">ymin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stackaxismin</span><span class="w">
      </span><span class="n">df</span><span class="o">$</span><span class="n">ymax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stackaxismax</span><span class="w">
      </span><span class="n">df</span><span class="o">$</span><span class="n">y</span><span class="w">    </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span><span class="w">

    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params</span><span class="o">$</span><span class="n">binaxis</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"y"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="c1"># ymin, ymax, xmin, and xmax define the bounding rectangle for each stack</span><span class="w">
      </span><span class="c1"># Can't do bounding box per dot, because x position isn't real.</span><span class="w">
      </span><span class="c1"># xmin and xmax aren't really the x bounds, because of the odd way the grob</span><span class="w">
      </span><span class="c1"># works. They're just set to the standard x +- width/2 so that dot clusters</span><span class="w">
      </span><span class="c1"># can be dodged like other geoms.</span><span class="w">
      </span><span class="c1"># After position code is rewritten, each dot should have its own bounding box.</span><span class="w">
      </span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ddply</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">(</span><span class="n">group</span><span class="p">),</span><span class="w"> </span><span class="n">transform</span><span class="p">,</span><span class="w">
            </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">binwidth</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w">
            </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">binwidth</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

      </span><span class="n">df</span><span class="o">$</span><span class="n">xmin</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">stackaxismin</span><span class="w">
      </span><span class="n">df</span><span class="o">$</span><span class="n">xmax</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">stackaxismax</span><span class="w">
          </span><span class="p">}</span><span class="w">
    </span><span class="n">df</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
 <h2 id="ruby">Ruby</h2>
 <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">HTMLProcessor</span>

  <span class="c1"># called before parsing anything</span>
  <span class="k">def</span> <span class="nf">start_parsing</span><span class="p">(</span><span class="n">scope_name</span><span class="p">)</span>
    <span class="vi">@line</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="vi">@offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="vi">@text</span><span class="o">=</span> <span class="p">[]</span>
  <span class="k">end</span>

  <span class="c1"># called after parsing everything</span>
  <span class="k">def</span> <span class="nf">end_parsing</span><span class="p">(</span><span class="n">scope_name</span><span class="p">)</span>
    <span class="vi">@text</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
      <span class="vi">@text</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"&lt;span class='l l-</span><span class="si">#{</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">scope_name</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="s1">'.'</span><span class="p">,</span><span class="s1">' '</span><span class="p">)</span><span class="si">}</span><span class="s2">'&gt;</span><span class="si">#{</span><span class="n">line</span><span class="si">}</span><span class="s2">&lt;/span&gt;"</span>
    <span class="k">end</span>
    <span class="nb">puts</span> <span class="vi">@text</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="c1"># called before processing a line</span>
  <span class="k">def</span> <span class="nf">new_line</span><span class="p">(</span><span class="n">line_content</span><span class="p">)</span>
    <span class="vi">@offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="vi">@line</span> <span class="o">=</span> <span class="n">line_content</span><span class="p">.</span><span class="nf">clone</span>
    <span class="vi">@text</span> <span class="o">&lt;&lt;</span> <span class="vi">@line</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">open_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">position_in_current_line</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="s2">"&lt;s class='</span><span class="si">#{</span><span class="n">tag_name</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span><span class="s2">" "</span><span class="p">)</span><span class="si">}</span><span class="s2">'&gt;"</span>
    <span class="vi">@line</span><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="n">position_in_current_line</span> <span class="o">+</span> <span class="vi">@offset</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
    <span class="vi">@offset</span> <span class="o">+=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">size</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">close_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">position_in_current_line</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="s2">"&lt;/s&gt;"</span>
    <span class="vi">@line</span><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="n">position_in_current_line</span> <span class="o">+</span> <span class="vi">@offset</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
    <span class="vi">@offset</span> <span class="o">+=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">size</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="n">syntax</span> <span class="o">=</span> <span class="no">Textpow</span><span class="p">.</span><span class="nf">syntax</span><span class="p">(</span><span class="s1">'ruby'</span><span class="p">)</span> <span class="c1"># or 'source.ruby' or 'lib/textpow/syntax/source.ruby.syntax'</span>
<span class="n">processor</span> <span class="o">=</span> <span class="no">HTMLProcessor</span><span class="p">.</span><span class="nf">new</span>
<span class="n">syntax</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">processor</span><span class="p">)</span>

<span class="nb">require</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s1">'../boot'</span><span class="p">,</span> <span class="kp">__FILE__</span><span class="p">)</span>

<span class="nb">require</span> <span class="s1">'rails/all'</span>

<span class="k">if</span> <span class="k">defined?</span><span class="p">(</span><span class="no">Bundler</span><span class="p">)</span>
  <span class="c1"># If you precompile assets before deploying to production, use this line</span>
  <span class="no">Bundler</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="o">*</span><span class="no">Rails</span><span class="p">.</span><span class="nf">groups</span><span class="p">(</span><span class="ss">:assets</span> <span class="o">=&gt;</span> <span class="sx">%w(development test)</span><span class="p">))</span>
  <span class="c1"># If you want your assets lazily compiled in production, use this line</span>
  <span class="c1"># Bundler.require(:default, :assets, Rails.env)</span>
<span class="k">end</span>

<span class="nb">require</span> <span class="s1">'rubygems'</span>

<span class="c1"># Set up gems listed in the Gemfile.</span>
<span class="no">ENV</span><span class="p">[</span><span class="s1">'BUNDLE_GEMFILE'</span><span class="p">]</span> <span class="o">||=</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s1">'../../Gemfile'</span><span class="p">,</span> <span class="kp">__FILE__</span><span class="p">)</span>

<span class="nb">require</span> <span class="s1">'bundler/setup'</span> <span class="k">if</span> <span class="no">File</span><span class="p">.</span><span class="nf">exists?</span><span class="p">(</span><span class="no">ENV</span><span class="p">[</span><span class="s1">'BUNDLE_GEMFILE'</span><span class="p">])</span>


</code></pre></div></div>
 <h2 id="perl">Perl</h2>
 <div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">use</span> <span class="nv">strict</span><span class="p">;</span>

<span class="c1">#</span>
<span class="c1"># This script also prints the contents of all the listed files, but</span>
<span class="c1"># it first scans through the list to check that each file exists and</span>
<span class="c1"># is readable.  It will stop if there are any errors.</span>
<span class="c1">#</span>

<span class="k">my</span> <span class="nv">$bad</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">foreach</span> <span class="k">my</span> <span class="nv">$fn</span> <span class="p">(</span><span class="nv">@ARGV</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="o">-</span><span class="nv">r</span> <span class="nv">$fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1"># File cannot be read.  See if it exists or not for a better</span>
        <span class="c1"># error message.</span>
        <span class="k">if</span><span class="p">(</span><span class="o">-</span><span class="nv">e</span> <span class="nv">$fn</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">print</span> <span class="bp">STDERR</span> <span class="p">"</span><span class="s2">You do not have permission to read </span><span class="si">$fn</span><span class="s2">.</span><span class="se">\n</span><span class="p">";</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">print</span> <span class="bp">STDERR</span> <span class="p">"</span><span class="s2">File </span><span class="si">$fn</span><span class="s2"> does not exist.</span><span class="se">\n</span><span class="p">";</span>
        <span class="p">}</span>

        <span class="c1"># One way or the other, it's bad.</span>
        <span class="nv">$bad</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># If there was a problem, bail out.</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$bad</span><span class="p">)</span> <span class="p">{</span> <span class="nb">exit</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>

<span class="c1"># Copy all the files.</span>
<span class="k">while</span><span class="p">(</span><span class="k">my</span> <span class="nv">$fn</span> <span class="o">=</span> <span class="nb">shift</span> <span class="nv">@ARGV</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1"># Open the file.</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">open</span><span class="p">(</span><span class="nv">INFILE</span><span class="p">,</span> <span class="nv">$fn</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1"># We know the file is readable, but sometimes something else goes</span>
        <span class="c1"># wrong.  It's safer to check.</span>
        <span class="k">print</span> <span class="bp">STDERR</span> <span class="p">"</span><span class="s2">Cannot open </span><span class="si">$fn</span><span class="s2">: $!</span><span class="se">\n</span><span class="p">";</span>
        <span class="k">next</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># Copy it.</span>
    <span class="k">while</span><span class="p">(</span><span class="k">my</span> <span class="nv">$l</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nv">INFILE</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">print</span> <span class="nv">$l</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nb">close</span> <span class="nv">INFILE</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
 <h2 id="r-cran">R (CRAN)</h2>
 <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyterra</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">terra</span><span class="p">)</span><span class="w">

</span><span class="n">f</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata/cyl_temp.tif"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tidyterra"</span><span class="p">)</span><span class="w">

</span><span class="n">temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rast</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="w">

</span><span class="n">temp</span><span class="w">
</span><span class="c1">#&gt; class       : SpatRaster </span><span class="w">
</span><span class="c1">#&gt; dimensions  : 87, 118, 3  (nrow, ncol, nlyr)</span><span class="w">
</span><span class="c1">#&gt; resolution  : 3881.255, 3881.255  (x, y)</span><span class="w">
</span><span class="c1">#&gt; extent      : -612335.4, -154347.3, 4283018, 4620687  (xmin, xmax, ymin, ymax)</span><span class="w">
</span><span class="c1">#&gt; coord. ref. : World_Robinson </span><span class="w">
</span><span class="c1">#&gt; source      : cyl_temp.tif </span><span class="w">
</span><span class="c1">#&gt; names       :   tavg_04,   tavg_05,  tavg_06 </span><span class="w">
</span><span class="c1">#&gt; min values  :  1.885463,  5.817587, 10.46338 </span><span class="w">
</span><span class="c1">#&gt; max values  : 13.283829, 16.740898, 21.11378</span><span class="w">

</span><span class="n">mod</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">select</span><span class="p">(</span><span class="m">-1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">newcol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tavg_06</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">tavg_05</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">relocate</span><span class="p">(</span><span class="n">newcol</span><span class="p">,</span><span class="w"> </span><span class="n">.before</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">replace_na</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">newcol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">rename</span><span class="p">(</span><span class="n">difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newcol</span><span class="p">)</span><span class="w">

</span><span class="n">mod</span><span class="w">
</span><span class="c1">#&gt; class       : SpatRaster </span><span class="w">
</span><span class="c1">#&gt; dimensions  : 87, 118, 3  (nrow, ncol, nlyr)</span><span class="w">
</span><span class="c1">#&gt; resolution  : 3881.255, 3881.255  (x, y)</span><span class="w">
</span><span class="c1">#&gt; extent      : -612335.4, -154347.3, 4283018, 4620687  (xmin, xmax, ymin, ymax)</span><span class="w">
</span><span class="c1">#&gt; coord. ref. : World_Robinson </span><span class="w">
</span><span class="c1">#&gt; source(s)   : memory</span><span class="w">
</span><span class="c1">#&gt; names       : difference,   tavg_05,  tavg_06 </span><span class="w">
</span><span class="c1">#&gt; min values  :   2.817647,  5.817587, 10.46338 </span><span class="w">
</span><span class="c1">#&gt; max values  :   5.307511, 16.740898, 21.11378</span><span class="w">
</span><span class="n">lux</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"ex/lux.shp"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terra"</span><span class="p">)</span><span class="w">

</span><span class="n">v_lux</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">vect</span><span class="p">(</span><span class="n">lux</span><span class="p">)</span><span class="w">

</span><span class="n">v_lux</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Create categories</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">gr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cut</span><span class="p">(</span><span class="n">POP</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Summary</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="w">
    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">(),</span><span class="w">
    </span><span class="n">tot_pop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">POP</span><span class="p">),</span><span class="w">
    </span><span class="n">mean_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">AREA</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Arrange</span><span class="w">
  </span><span class="n">arrange</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">gr</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt;  class       : SpatVector </span><span class="w">
</span><span class="c1">#&gt;  geometry    : polygons </span><span class="w">
</span><span class="c1">#&gt;  dimensions  : 3, 4  (geometries, attributes)</span><span class="w">
</span><span class="c1">#&gt;  extent      : 5.74414, 6.528252, 49.44781, 50.18162  (xmin, xmax, ymin, ymax)</span><span class="w">
</span><span class="c1">#&gt;  coord. ref. : lon/lat WGS 84 (EPSG:4326) </span><span class="w">
</span><span class="c1">#&gt;  names       :          gr     n   tot_pop mean_area</span><span class="w">
</span><span class="c1">#&gt;  type        :      &lt;fact&gt; &lt;int&gt;     &lt;num&gt;     &lt;num&gt;</span><span class="w">
</span><span class="c1">#&gt;  values      :   (147,183]     2 3.594e+05       244</span><span class="w">
</span><span class="c1">#&gt;                (40.7,76.1]     1 4.819e+04       185</span><span class="w">
</span><span class="c1">#&gt;                (4.99,40.7]     9 1.944e+05     209.8</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">

</span><span class="c1"># A faceted SpatRaster</span><span class="w">

</span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatraster</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">lyr</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_whitebox_c</span><span class="p">(</span><span class="w">
    </span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"muted"</span><span class="p">,</span><span class="w">
    </span><span class="n">na.value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="w">
  </span><span class="p">)</span><span class="w">

</span><span class="c1"># Contour lines for a specific layer</span><span class="w">

</span><span class="n">f_volcano</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata/volcano2.tif"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tidyterra"</span><span class="p">)</span><span class="w">
</span><span class="n">volcano2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rast</span><span class="p">(</span><span class="n">f_volcano</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatraster</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">volcano2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatraster_contour</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">volcano2</span><span class="p">,</span><span class="w"> </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">80</span><span class="p">,</span><span class="w"> </span><span class="m">200</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_whitebox_c</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_sf</span><span class="p">(</span><span class="n">expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"elevation"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Contour filled</span><span class="w">

</span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatraster_contour_filled</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">volcano2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_whitebox_d</span><span class="p">(</span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"atlas"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"elevation"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Read a vector</span><span class="w">

</span><span class="n">f_v</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata/cyl.gpkg"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tidyterra"</span><span class="p">)</span><span class="w">
</span><span class="n">v</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">vect</span><span class="p">(</span><span class="n">f_v</span><span class="p">)</span><span class="w">

</span><span class="c1"># Read a tile</span><span class="w">
</span><span class="n">f_rgb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata/cyl_tile.tif"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tidyterra"</span><span class="p">)</span><span class="w">

</span><span class="n">r_rgb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rast</span><span class="p">(</span><span class="n">f_rgb</span><span class="p">)</span><span class="w">

</span><span class="n">rgb_plot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatraster_rgb</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r_rgb</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="n">rgb_plot</span><span class="w">

</span><span class="n">asia</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rast</span><span class="p">(</span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata/asia.tif"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tidyterra"</span><span class="p">))</span><span class="w">

</span><span class="n">asia</span><span class="w">
</span><span class="c1">#&gt; class       : SpatRaster </span><span class="w">
</span><span class="c1">#&gt; dimensions  : 164, 306, 1  (nrow, ncol, nlyr)</span><span class="w">
</span><span class="c1">#&gt; resolution  : 31836.23, 31847.57  (x, y)</span><span class="w">
</span><span class="c1">#&gt; extent      : 7619120, 17361007, -1304745, 3918256  (xmin, xmax, ymin, ymax)</span><span class="w">
</span><span class="c1">#&gt; coord. ref. : WGS 84 / Pseudo-Mercator (EPSG:3857) </span><span class="w">
</span><span class="c1">#&gt; source      : asia.tif </span><span class="w">
</span><span class="c1">#&gt; name        : file44bc291153f2 </span><span class="w">
</span><span class="c1">#&gt; min value   :        -9558.468 </span><span class="w">
</span><span class="c1">#&gt; max value   :         5801.927</span><span class="w">

</span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatraster</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">asia</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_hypso_tint_c</span><span class="p">(</span><span class="w">
    </span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gmt_globe"</span><span class="p">,</span><span class="w">
    </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scales</span><span class="o">::</span><span class="n">label_number</span><span class="p">(),</span><span class="w">
    </span><span class="c1"># Further refinements</span><span class="w">
    </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-10000</span><span class="p">,</span><span class="w"> </span><span class="m">-5000</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">2000</span><span class="p">,</span><span class="w"> </span><span class="m">5000</span><span class="p">,</span><span class="w"> </span><span class="m">8000</span><span class="p">),</span><span class="w">
    </span><span class="n">guide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guide_colorbar</span><span class="p">(</span><span class="n">reverse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="w">
    </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"elevation (m)"</span><span class="p">,</span><span class="w">
    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hypsometric map of Asia"</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="w">
    </span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bottom"</span><span class="p">,</span><span class="w">
    </span><span class="n">legend.title.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"top"</span><span class="p">,</span><span class="w">
    </span><span class="n">legend.key.width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rel</span><span class="p">(</span><span class="m">3</span><span class="p">),</span><span class="w">
    </span><span class="n">legend.ticks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_line</span><span class="p">(</span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3</span><span class="p">),</span><span class="w">
    </span><span class="n">legend.direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="w">
  </span><span class="p">)</span><span class="w">

</span><span class="n">lux</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"ex/lux.shp"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terra"</span><span class="p">)</span><span class="w">

</span><span class="n">v_lux</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">terra</span><span class="o">::</span><span class="n">vect</span><span class="p">(</span><span class="n">lux</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">v_lux</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">POP</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector_text</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NAME_2</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grey90"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_binned</span><span class="p">(</span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scales</span><span class="o">::</span><span class="n">number_format</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_sf</span><span class="p">(</span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3857</span><span class="p">)</span><span class="w">

</span><span class="c1"># Dissolving</span><span class="w">
</span><span class="n">v_lux</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Create categories</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">gr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cut</span><span class="p">(</span><span class="n">POP</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Summary</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="w">
    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">(),</span><span class="w">
    </span><span class="n">tot_pop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">POP</span><span class="p">),</span><span class="w">
    </span><span class="n">mean_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">AREA</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tot_pop</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector_label</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gr</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_sf</span><span class="p">(</span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3857</span><span class="p">)</span><span class="w">


</span><span class="c1"># Same but keeping internal boundaries</span><span class="w">
</span><span class="n">v_lux</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Create categories</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">gr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cut</span><span class="p">(</span><span class="n">POP</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># Summary without dissolving</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="w">
    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">(),</span><span class="w">
    </span><span class="n">tot_pop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">POP</span><span class="p">),</span><span class="w">
    </span><span class="n">mean_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">AREA</span><span class="p">),</span><span class="w">
    </span><span class="n">.dissolve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tot_pop</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_spatvector_label</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gr</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_sf</span><span class="p">(</span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3857</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
</div>
</article>
		</div>
	</main><nav aria-label="Navigation" class="container-lg chulapa-pagination  ">
 <ul class="col-lg-8 offset-lg-2 pagination chulapa-pagination-round px-0 ">
   <li class="page-item text-left mr-0 ">
      <a class="page-link border-0 px-4" href="https://dieghernan.github.io/chulapa-jekyll-sample/headers" tabindex="-1">
	  <i class="fa fa-chevron-left" aria-hidden="true"></i><span class="sr-only">Previous</span>
	  </a>
   </li>
   <li class="page-item border-0 disabled text-left ml-0 mr-auto d-none d-md-inline ">
     <p class="page-link chulapa-label">Header test</p>
   </li>
   <li class="page-item border-0 disabled text-left ml-0 mr-auto d-none d-sm-inline d-md-none ">
     <p class="page-link chulapa-label">Header test</p>
   </li>
	 <li class="page-item disabled mx-auto invisible">
	  <p class="page-link">|</p>
	 </li>	
	 <li class="page-item border-0 disabled text-right mr-0 ml-auto d-none d-sm-inline d-md-none ">
	   <p class="page-link chulapa-label">Lorem Ipsum</p>
	 </li>
	 <li class="page-item border-0 disabled text-right mr-0 ml-auto d-none d-md-inline ">
	   <p class="page-link chulapa-label">Lorem Ipsum</p>
	 </li>
   <li class="page-item text-right ml-0 ">
      <a class="page-link border-0 px-4" href="https://dieghernan.github.io/chulapa-jekyll-sample/lorem-ipsum/">
	  <i class="fa fa-chevron-right" aria-hidden="true"></i><span class="sr-only">Next</span></a>
   </li>
 </ul>
</nav>
<!-- Footer -->
 <footer class="footer-chulapa text-center mt-0 pt-3">
   <div class="container">
     <div class="row">
       <div class="col-xl-10 offset-xl-1"><div role="navigation" class="d-flex flex-wrap justify-content-center"><a href="https://github.com/dieghernan/chulapa-101" title="footerRepo on Github" class="chulapa-footer-sociallink lead"><span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span><span class="sr-only">Repo on Github</span>
            </a><a href="https://dieghernan.github.io/chulapa-jekyll-sample/atom.xml" title="footerRSS" class="chulapa-footer-sociallink lead"><span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span><span class="sr-only">RSS</span>
            </a></div><p class="mt-2 mb-3">&copy; 2025 Octocat</p>
          <!-- Do not remove this in order to give  attributions -->
         <p class="chulapa-footer-brand">Powered by <a href="https://dieghernan.github.io/chulapa"> <span class="chulapa">Chulapa</span> Jekyll Theme</a></p>
          <!-- End  attributions -->
       </div>
     </div>
 </div>
</footer>
<!-- Footer -->
<!-- JS, Popper.js, and jQuery -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/gh/dieghernan/chulapa@master/assets/js/chulapa_script.js"></script>
	<!-- start custom scripts to be placed at the bottom of the page -->
<!-- end custom bottom scripts -->
	</body>
</html>
